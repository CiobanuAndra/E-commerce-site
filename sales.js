const products=[
    {
        id:3,
        price: '250',        
        title: 'George Kovacs Saber 2-Light Bathroom Vanity Light in Brushed Nickel',
        details: 'The force of super cool bathrooms will be with you when you choose to illuminate yours with the Saber 2-light bath bar from the George Kovacs collection. Brushed nickel backplate and trim with cased etched opal glass shade 4.75" high x 20" wide; extends 4.75" from wall; can be mounted horizontally or vertically. Uses two standard light bulbs, up to 60 watts each (not included); dimmable Damp area rated; suitable for use in humid indoor areas such as bathrooms',
        imgPathDesktop: "SOURCES/CATEGORIES/bath/bath3.jpg",
    },
    {
        id:5,
        price: '550',        
        title: 'Savoy House Woodbury 2-Light Bathroom Vanity Light in Warm Brass',
        details: 'This 2-light bathroom vanity light from Savoy House is a part of the Woodbury collection and comes in a warm brass finish It measures 14" wide x 12" high. This light uses two standard dimmable bulbs up to 60 watts each. This light would look best in the bathroom. Damp rated. Can be used in humid environments like bathrooms or covered outdoor areas',
        imgPathDesktop: "SOURCES/CATEGORIES/bath/bath5.jpg",
    },
    {
        id:6,
        price: '900',
        title: 'Golden Chatham 3-Light Ceiling Light in Gray Driftwood',
        details: 'This 3-light ceiling light from Golden Lighting is a part of the Chatham collection and comes in gray driftwood finish. This light measures 15" wide x 11" high. This light uses three standard bulbs up to 60 watts each. This light would look best in the bath. Damp rated. Can be used in humid environments like bathrooms or covered outdoor areas.',
        imgPathDesktop: "SOURCES/CATEGORIES/ceiling/ceiling1.jpg",
    },
    {
        id:8,
        price: '1500',
        title: 'Trade Winds Hutchins Semi-Flush Mount Ceiling Light in Matte Black',
        details: 'This 2-Light Hutchins Semi-Flush Mount Ceiling Light is from Trade Winds Lighting and comes in a Matte Black finish It measures 10" high x 13" long x13" wide. Dry Rated. Intended to be used for indoor locations. Bulbs not included. Made with Metal and Fabric',
        imgPathDesktop: "SOURCES/CATEGORIES/ceiling/ceiling3.jpg",
    },
    {
        id:9,
        price: '1150',
        title: 'Trade Winds Stella Star Semi-Flush Mount Ceiling Light in Natural Brass',
        details: 'This 2-Light Stella Star Semi-Flush Mount Ceiling Light is from Trade Winds Lighting and comes in a Natural Brass finish It measures 7" high x 16" long x16" wide. Dry Rated. Intended to be used for indoor locations. Bulbs not included. Made with Metal and Glass',
        imgPathDesktop: "SOURCES/CATEGORIES/ceiling/ceiling4.jpg",
    },
    {
        id:14,
        price: '2600',
        title: 'Savoy House Lyrique 6-Light Chandelier in Bronze with Brass Accents',
        details: 'Adjustable arms provide a fun chance to customize your lighting look with the Lyrique 6-light chandelier from Savoy House. Bronze finish with brass accents Chandelier is 7” high x 21.75” wide x 21.75” long; four 12” downrods and one 6” downrod included to customize installation height; sloped ceiling compatible Uses six standard size bulbs; up to 60 watts each (not included) Adjustable arms allow for customized looks',
        imgPathDesktop: "SOURCES/CATEGORIES/chandeliers/chandelier4.jpg",
    },
    {
        id:21,
        price: '350',        
        title: 'Trade Winds Lisa Metal Pendant Light in Polished Nickel',
        details: 'This 1-Light Lisa Metal Pendant Light is from Trade Winds Lighting and comes in a Polished Nickel finish It measures 14" high x 10.5" long x10.5" wide. Dry Rated. Intended to be used for indoor locations. Bulbs not included. Made with Metal',
        imgPathDesktop: "SOURCES/CATEGORIES/pendants/pendant1.jpeg",
    },
    {
        id:22,
        price: '250',        
        title: 'Savoy House Alden 1-Light Pendant in Matte Black',
        details: 'Let the bold beauty of pure matte black enrich your home with the elegant Alden pendant light from Savoy House. Pendant light has a matte black metal shade, rod, canopy and chain 12.5" high x 18.25" wide Uses one standard size light bulb up to 60 watts Comes with two 9.5" rods and 10 feet of chain for a customizable hanging height Adaptable for sloped ceilings',
        imgPathDesktop: "SOURCES/CATEGORIES/pendants/pendant2.jpeg",
    },
    {
        id:27,
        price: '480',        
        title: 'Golden Orwell 9" Pendant Light in Aged Brass',
        details: 'This pendant light from Golden Lighting is a part of the Orwell collection and comes in aged brass finish. Light measures 10" wide x 9" high. Uses one standard bulb up to 100 watts. This light would look best in the kitchen. Damp Rated. Can be used in humid environments like bathrooms or covered outdoor areas.',
        imgPathDesktop: "SOURCES/CATEGORIES/pendants/pendant7.jpeg",
    },
    {
        id:32,
        price: '180',        
        title: 'Savoy House Dawson 1-Light Wall Sconce in Warm Brass',
        details: 'This 1-light wall sconce from Savoy House is a part of the Dawson collection and comes in a warm brass finish. This measures 4.75"W x 17.875"H. This uses one 60W candelabra bulb; not included. Damp rated: Light can be used in humid environments like bathrooms or covered outdoor areas.',
        imgPathDesktop: "SOURCES/CATEGORIES/wallLights/wallLight2.jpg",
    },
    {
        id:33,
        price: '620',        
        title: 'Meridian 1-Light Wall Sconce in Brushed Nickel',
        details: 'This 1-light wall sconce by Meridian Lighting comes in a brushed nickel finish. This measures 5"W x 10.5"H. This uses one 60W bulb; not included. Damp rated: Light can be used in humid environments like bathrooms or covered outdoor areas',
        imgPathDesktop: "SOURCES/CATEGORIES/wallLights/wallLight3.jpg",
    },
    {
        id:34,
        price: '250',        
        title: 'Meridian 1-Light Wall Sconce in Natural Brass',
        details: 'This 1-light wall sconce by Meridian Lighting comes in a natural brass finish. This measures 10"W x 16"H. This uses one 60W bulb; not included. Damp rated: Light can be used in humid environments like bathrooms or covered outdoor areas',
        imgPathDesktop: "SOURCES/CATEGORIES/wallLights/wallLight4.jpg",
    },
    {
        id:42,
        price: '1400',        
        title: 'Hudson Valley Piton Table Lamp in Aged Brass and Soft Black',
        details: 'This table lamp from Hudson Valley is a part of the Piton collection comes in aged brass and soft black finish. This light measures 6" wide x 22" high. This light uses one standard bulb. For indoor use. This light includes a 1 Year Limited Manufacturer Warranty.',
        imgPathDesktop: "SOURCES/CATEGORIES/lamps/lamp1.jpg",
    },
    {
        id:44,
        price: '450',        
        title: 'George Kovacs Simple Table Lamp in Black and Gold',
        details: 'This table lamp from George Kovacs is a part of the Simple collection and comes in a black and gold finish. It measures 9" long x 9" wide x 13" high. Includes one standard bulb. For indoor use.',
        imgPathDesktop: "SOURCES/CATEGORIES/lamps/lamp3.jpg",
    },
    {
        id:50,
        price: '480',        
        title: 'Uttermost Felice 18" Accent Lamp in Distressed Oak Charcoal',
        details: 'Intricately Shaped Ceramic,Finished In A Heavily Distressed Dark Charcoal With A Metallic Silver Undertone,Accented With Polished Nickel Plated Details. The Tapered Round Hardback Shade Is A Light Gray Linen Fabric With Natural Slubbing.For indoor use.This light includes one standard bulb.',
        imgPathDesktop: "SOURCES/CATEGORIES/lamps/lamp10.jpg",
    },
    {
        id:51,
        price: '250',        
        title: 'Golden Chatham 3-Light Ceiling Light in Gray Driftwood',
        details: 'This path light from Hinkley is a part of the Path Squirrel collection and comes in regency bronze finish. This light measures 9" wide x 25" high. This light uses a 2700K integrated LED. Wet rated. Can be exposed to rain, snow and the elements.',
        imgPathDesktop: "SOURCES/CATEGORIES/outdoor/outdoor1.jpg",
    },
    {
        id:55,
        price: '420',        
        title: 'Generation Lighting Kent 20" Outdoor Post Light in Black',
        details: 'This outdoor post light from Generation Lighting is a part of the Kent collection and comes in black finish. Light measures 8" wide x 20" high. Uses one standard bulb up to 100 watts. Wet rated. Can be exposed to rain, snow and the elements.',
        imgPathDesktop: "SOURCES/CATEGORIES/outdoor/outdoor5.jpg",
    },
    {
        id:57,
        price: '390',        
        title: 'Nautica 1-Light Textured White Post Mount Light',
        details: 'You can almost hear the waves lapping at the dockâ€¦ sturdy 9-panel sides create a square lantern with the sea in its blood. A shapely top completes the coastal design. durable cast aluminum cape cod design etched frosted white glass pre-assembled for easy installation requires 1 100-watt max medium base bulb installation hardware included 1 year warranty',
        imgPathDesktop: "SOURCES/CATEGORIES/outdoor/outdoor7.jpg",
    },
  
];


// importScripts ('basic-functions-productPage.js');



const productsString = JSON.stringify(products);
localStorage.setItem('productsListInsideStorage', productsString);
const productsStringFromStorage= localStorage.getItem('productsListInsideStorage');
const productsList=JSON.parse(productsStringFromStorage);


function createElementProduct(id, title,imagine, pret){
    const article = document.createElement('article');
    article.setAttribute("id",id);
    
    const h3= document.createElement('h3');
    h3.textContent=title;

    const price= document.createElement('h3');
    price.textContent=pret+' RON';
    price.setAttribute("class",'price');


    const bkg= document.createElement('img');
    bkg.setAttribute("src",imagine);


    const button =document.createElement('button');
    button.setAttribute("class",'buy');
    button.textContent='BUY NOW';

    const divTitleButton =document.createElement('div');
    divTitleButton.setAttribute("class",'divTitleButton');

    divTitleButton.appendChild(h3);
    divTitleButton.appendChild(price);
    divTitleButton.appendChild(button);

    article.appendChild(bkg);
    article.appendChild(divTitleButton);


    //APASAREA PE ARTICOL CA SA NE DUCA LA PRODUS//

    article.addEventListener('click', ()=>{
        //De fiecare data cand dam click pe un articol (care are title, id, price, details, imgPathDesktop)
        //o vrem sa ne salvam cumva id-ul articolului si sa il bagam 
        //in URL-ul din pagina produsului la care vom fi redirectionati.
        //Deci acum cand dam click pe articol, vom fi redirectionati spre el si in bara
        //vom avea id-ul lui salvat ca parametru cu numele de "creationId", imd dupa "?".
        location.replace('/specificProduct.html?creationId='+id);
    })

    return article;
}

const maxLenghtPerPages=8;

//CREAREA FIECAREI PAGINI DE PRODUSE SI AFISAREA ITEMELOR IN FUNCTIE DE NR PAGINII PE CARE S-A APASAT---------------------------//
function createProductsList(indexStart,list){
    const productsDiv = document.querySelector('.products');
    productsDiv.innerHTML='';        //Aici golim lista noastra de produse.//
    //Daca nu punem linia asta de cod, de fiecare data cand apasam pe nr unei pagini,//
    //o sa ne adauge in continuare itemele (e ca si cum nu trecem la o pagina noua)//
    for(let i=indexStart; i<indexStart+maxLenghtPerPages&& i<list.length;i++){
        // const item = Math.floor(Math.random()*chandeliersList.length);
        const titleProduct = list[i].title;
        const idItem= list[i].id;
        const price= list[i].price;
        const img= list[i].imgPathDesktop;
        const createdArticle = createElementProduct(idItem, titleProduct,img, price);
        productsDiv.appendChild(createdArticle);
    }
}



//CREAREA NUMERELOR PAGINILOR SI ASCULTAREA CLICK-ULUI PE ELE---------------------------//
function createPages(list){
    const container= document.querySelector('.pagesNumbers');
    const ul= document.createElement('ul');
    const pagesNumber = Math.ceil(list.length/maxLenghtPerPages);

    for(let i=0;i<pagesNumber; i++){
        const li=document.createElement('li');
        li.textContent=i + 1;
        ul.appendChild(li);
    }
    ul.addEventListener('click',(ev)=>{
        const curentPageNumber= ev.target.textContent;
        console.log(curentPageNumber);
        if(curentPageNumber.length===1){   //Fara acest if, cand apasam intre li-uri (adiac doar pe continutul ul-ului) n-o sa ne afiseze niciuna din pagini.
            const curentPageNumberParse= parseInt(curentPageNumber);
            const startIndex=(curentPageNumberParse-1)*maxLenghtPerPages;
            createProductsList(startIndex,list);
        }

    });
    container.appendChild(ul);
}

createPages(productsList);
createProductsList(0,productsList);




//-----------------------------------------------------------------------------------------------//
//-----------------------------------------------------------------------------------------------//
//SEARCH SI FILTRARE//

const allItemList = localStorage.getItem('allItemsListFromStorage')
const allItemListParsed = JSON.parse(allItemList);
console.log(allItemListParsed);
//Am pus toata lista de produse aici, si am luat-o din local.storage (unde era salvata ca string)
//inca din documentul de initAllItems.js) si am transformat-o in obiect, ptc nu ne ajuta ca era string.


const input = document.querySelector('#textSearch');
input.addEventListener('keypress', function(e) {
    const valueSearch= input.value;
    if(e.key==='Enter'){
        // const filterListByTitleArray=[];
        const filterListByTitle = allItemListParsed.filter((item)=>{
            // let foundProduct=0;
            return item.title.toLowerCase().includes(valueSearch.toLowerCase())
       
        });
        // filterListByTitleArray.push(filterListByTitle);

        console.log(filterListByTitle);
        const filterListByTitleString = JSON.stringify(filterListByTitle);
        localStorage.setItem('filterListByTitleLocalStorage', filterListByTitleString);
        location.replace('filteredProducts.html');
    }
});

//Ne folosim de functiile de creare produs si de paginare, si pentru asta le aducem aici//

